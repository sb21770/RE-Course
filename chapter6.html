<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×¤×¨×§ 6: Assembly - ×‘×§×¨×ª ×–×¨×™××”</title>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700;900&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #131a2b;
            --bg-card: #1a2235;
            --accent-primary: #00ff88;
            --accent-secondary: #00b4d8;
            --accent-warning: #ff6b35;
            --text-primary: #e8e8e8;
            --text-secondary: #a0a0a0;
            --border-color: #2a3548;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Heebo', sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.9; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        nav { background: var(--bg-secondary); padding: 1rem 2rem; border-bottom: 1px solid var(--border-color); position: sticky; top: 0; z-index: 100; }
        nav a { color: var(--accent-primary); text-decoration: none; }
        .chapter-header { background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-secondary) 100%); padding: 4rem 2rem; text-align: center; border-bottom: 1px solid var(--border-color); }
        .chapter-number { display: inline-block; background: linear-gradient(135deg, #00ff88 0%, #00b4d8 100%); color: var(--bg-primary); padding: 0.5rem 1.5rem; border-radius: 30px; font-weight: 700; margin-bottom: 1rem; }
        h1 { font-size: 2.5rem; margin-bottom: 1rem; background: linear-gradient(135deg, #00ff88 0%, #00b4d8 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .subtitle { color: var(--text-secondary); font-size: 1.1rem; }
        .content { padding: 3rem 0; }
        h2 { font-size: 1.8rem; color: var(--accent-primary); margin: 3rem 0 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--border-color); }
        h3 { font-size: 1.3rem; color: var(--accent-secondary); margin: 2rem 0 1rem; }
        p { margin-bottom: 1.5rem; }
        .definition { background: var(--bg-card); border-right: 4px solid var(--accent-primary); padding: 1.5rem; border-radius: 0 10px 10px 0; margin: 1.5rem 0; }
        .definition-title { color: var(--accent-primary); font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem; }
        .info-box { background: rgba(0, 180, 216, 0.1); border: 1px solid var(--accent-secondary); border-radius: 10px; padding: 1.5rem; margin: 1.5rem 0; }
        .info-box-title { color: var(--accent-secondary); font-weight: 700; margin-bottom: 0.5rem; }
        ul, ol { margin: 1rem 0 1.5rem 1.5rem; }
        li { margin-bottom: 0.8rem; }
        code { font-family: 'Fira Code', monospace; background: var(--bg-card); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--accent-primary); font-size: 0.9rem; }
        pre { font-family: 'Fira Code', monospace; background: var(--bg-card); padding: 1.5rem; border-radius: 10px; overflow-x: auto; margin: 0; border: 1px solid var(--border-color); direction: ltr; text-align: left; line-height: 1.6; }
        .code-block { margin: 1.5rem 0; }
        .code-label { color: var(--accent-secondary); font-weight: 700; margin-bottom: 0.5rem; font-size: 0.9rem; }
        .code-explanation { background: var(--bg-secondary); padding: 1rem 1.5rem; border-radius: 0 0 10px 10px; border: 1px solid var(--border-color); border-top: none; direction: ltr; text-align: left; }
        .code-explanation p { margin: 0.5rem 0; font-size: 0.95rem; }
        .diagram { background: var(--bg-card); border-radius: 15px; padding: 2rem; margin: 2rem 0; text-align: center; border: 1px solid var(--border-color); }
        table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; background: var(--bg-card); border-radius: 10px; overflow: hidden; }
        th, td { padding: 1rem; text-align: right; border-bottom: 1px solid var(--border-color); }
        th { background: var(--bg-secondary); color: var(--accent-primary); font-weight: 600; }
        .nav-buttons { display: flex; justify-content: space-between; margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border-color); }
        .nav-btn { background: var(--bg-card); color: var(--text-primary); padding: 1rem 2rem; border-radius: 10px; text-decoration: none; border: 1px solid var(--border-color); transition: all 0.3s; }
        .nav-btn:hover { border-color: var(--accent-primary); transform: translateY(-3px); }
        .instruction { background: var(--bg-secondary); border-radius: 10px; padding: 1.5rem; margin: 1.5rem 0; border-right: 4px solid var(--accent-secondary); }
        .instruction-name { color: var(--accent-secondary); font-family: 'Fira Code', monospace; font-size: 1.2rem; font-weight: 700; margin-bottom: 0.5rem; }
    </style>
</head>
<body>
    <nav>
        <a href="index.html">â†’ ×—×–×¨×” ×œ×ª×¤×¨×™×˜ ×”×¨××©×™</a>
    </nav>

    <header class="chapter-header">
        <div class="chapter-number">×¤×¨×§ 6</div>
        <h1>Assembly - ×‘×§×¨×ª ×–×¨×™××”</h1>
        <p class="subtitle">×§×¤×™×¦×•×ª, ×ª× ××™×, ×œ×•×œ××•×ª, ×•×§×¨×™××•×ª ×œ×¤×•× ×§×¦×™×•×ª</p>
    </header>

    <div class="container">
        <div class="content">
            
            <h2>ğŸ”€ ×§×¤×™×¦×•×ª (Jumps)</h2>

            <div class="definition">
                <div class="definition-title">ğŸ“– ×”×’×“×¨×”: Jump</div>
                <p>×”×•×¨××” ×©××©× ×” ××ª EIP (××¦×‘×™×¢ ×”×¤×§×•×“×” ×”×‘××”) - ×’×•×¨××ª ×œ×§×•×“ "×œ×§×¤×•×¥" ×œ××§×•× ××—×¨.</p>
            </div>

            <div class="instruction">
                <div class="instruction-name">JMP</div>
                <p>×§×¤×™×¦×” ×œ×œ× ×ª× ××™ - ×ª××™×“ ×§×•×¤×¥.</p>
            </div>

            <div class="code-block">
                <pre>JMP label       ; Jump to label (symbolic name)
JMP 0x00401050  ; Jump to specific address
JMP EAX         ; Jump to address stored in EAX register</pre>
            </div>

            <h2>âš–ï¸ ×”×©×•×•××” ×•×”×©×¤×¢×” ×¢×œ ×“×’×œ×™×</h2>

            <div class="instruction">
                <div class="instruction-name">CMP</div>
                <p><strong>Compare</strong> - ××©×•×•×” ×‘×™×Ÿ ×©× ×™ ×¢×¨×›×™× (××—×¡×¨ ×‘×œ×™ ×œ×©××•×¨ ×ª×•×¦××”).<br>
                ××¢×“×›×Ÿ ××ª ×”×“×’×œ×™× ×œ×¤×™ ×”×ª×•×¦××”.</p>
            </div>

            <div class="code-block">
                <pre>CMP EAX, EBX    ; Compare EAX to EBX (subtract without saving)
                ; If EAX == EBX: ZF = 1
                ; If EAX < EBX:  CF = 1 (unsigned), SF != OF (signed)
                ; If EAX > EBX:  CF = 0 and ZF = 0</pre>
            </div>

            <div class="instruction">
                <div class="instruction-name">TEST</div>
                <p>×¢×•×©×” AND ×‘×œ×™ ×œ×©××•×¨ ×ª×•×¦××”. ××©××© ×œ×‘×“×™×§×” ×× ×¢×¨×š ×”×•× 0.</p>
            </div>

            <div class="code-block">
                <pre>TEST EAX, EAX   ; Check if EAX equals 0
                ; If EAX == 0: ZF = 1
                ; If EAX != 0: ZF = 0</pre>
            </div>

            <h2>ğŸš¦ ×§×¤×™×¦×•×ª ××•×ª× ×•×ª (Conditional Jumps)</h2>

            <p>×§×•×¤×¦×•×ª ×¨×§ ×× ×ª× ××™ ××¡×•×™× ××ª×§×™×™× (×‘×“×¨×š ×›×œ×œ ××—×¨×™ CMP ××• TEST):</p>

            <table>
                <tr>
                    <th>×”×•×¨××”</th>
                    <th>××©××¢×•×ª</th>
                    <th>×ª× ××™</th>
                </tr>
                <tr>
                    <td><code>JE / JZ</code></td>
                    <td>Jump if Equal / Zero</td>
                    <td>ZF = 1</td>
                </tr>
                <tr>
                    <td><code>JNE / JNZ</code></td>
                    <td>Jump if Not Equal / Not Zero</td>
                    <td>ZF = 0</td>
                </tr>
                <tr>
                    <td><code>JG / JNLE</code></td>
                    <td>Jump if Greater (signed)</td>
                    <td>ZF=0 AND SF=OF</td>
                </tr>
                <tr>
                    <td><code>JGE / JNL</code></td>
                    <td>Jump if Greater or Equal (signed)</td>
                    <td>SF = OF</td>
                </tr>
                <tr>
                    <td><code>JL / JNGE</code></td>
                    <td>Jump if Less (signed)</td>
                    <td>SF â‰  OF</td>
                </tr>
                <tr>
                    <td><code>JLE / JNG</code></td>
                    <td>Jump if Less or Equal (signed)</td>
                    <td>ZF=1 OR SFâ‰ OF</td>
                </tr>
                <tr>
                    <td><code>JA / JNBE</code></td>
                    <td>Jump if Above (unsigned)</td>
                    <td>CF=0 AND ZF=0</td>
                </tr>
                <tr>
                    <td><code>JAE / JNB</code></td>
                    <td>Jump if Above or Equal (unsigned)</td>
                    <td>CF = 0</td>
                </tr>
                <tr>
                    <td><code>JB / JNAE</code></td>
                    <td>Jump if Below (unsigned)</td>
                    <td>CF = 1</td>
                </tr>
                <tr>
                    <td><code>JBE / JNA</code></td>
                    <td>Jump if Below or Equal (unsigned)</td>
                    <td>CF=1 OR ZF=1</td>
                </tr>
            </table>

            <div class="info-box">
                <div class="info-box-title">ğŸ’¡ Signed vs Unsigned</div>
                <p>
                    <strong>Signed (×¢× ×¡×™××Ÿ):</strong> JG, JGE, JL, JLE<br>
                    <strong>Unsigned (×‘×œ×™ ×¡×™××Ÿ):</strong> JA, JAE, JB, JBE<br><br>
                    ×–×” ×—×©×•×‘! -1 ×‘signed ×–×” 0xFFFFFFFF ×©×”×•× ×”××¡×¤×¨ ×”×›×™ ×’×“×•×œ ×‘-unsigned.
                </p>
            </div>

            <h2>ğŸ“ ×“×•×’××”: ×ª× ××™ if-else</h2>

            <div class="code-block">
                <div class="code-label">×§×•×“ C:</div>
                <pre>if (a == 5) {
    b = 10;
} else {
    b = 20;
}</pre>
            </div>

            <div class="code-block">
                <div class="code-label">Assembly:</div>
                <pre>    mov eax, [ebp-4]        ; Load 'a' into EAX
    cmp eax, 5              ; Compare a to 5
    jne else_branch         ; If not equal, jump to else

    ; IF BLOCK (a == 5)
    mov dword [ebp-8], 10   ; b = 10
    jmp end_if              ; Skip else block

else_branch:
    ; ELSE BLOCK (a != 5)
    mov dword [ebp-8], 20   ; b = 20

end_if:
    ; Continue...</pre>
            </div>

            <div class="diagram">
                <svg viewBox="0 0 400 280" xmlns="http://www.w3.org/2000/svg">
                    <!-- CMP box -->
                    <rect x="150" y="10" width="100" height="40" rx="5" fill="#1a2235" stroke="#00b4d8" stroke-width="2"/>
                    <text x="200" y="35" text-anchor="middle" fill="#00b4d8" font-size="12" font-family="Fira Code">CMP a, 5</text>
                    
                    <!-- Diamond (condition) -->
                    <polygon points="200,70 260,100 200,130 140,100" fill="#1a2235" stroke="#00ff88" stroke-width="2"/>
                    <text x="200" y="105" text-anchor="middle" fill="#00ff88" font-size="11" font-family="Heebo">a == 5?</text>
                    
                    <!-- Arrow down from CMP -->
                    <line x1="200" y1="50" x2="200" y2="70" stroke="#a0a0a0" stroke-width="2"/>
                    
                    <!-- Yes branch (left) -->
                    <line x1="140" y1="100" x2="80" y2="100" stroke="#00ff88" stroke-width="2"/>
                    <line x1="80" y1="100" x2="80" y2="160" stroke="#00ff88" stroke-width="2"/>
                    <text x="110" y="90" fill="#00ff88" font-size="10" font-family="Heebo">×›×Ÿ</text>
                    
                    <rect x="30" y="160" width="100" height="40" rx="5" fill="#1a2235" stroke="#00ff88" stroke-width="2"/>
                    <text x="80" y="185" text-anchor="middle" fill="#00ff88" font-size="11" font-family="Fira Code">b = 10</text>
                    
                    <!-- No branch (right) -->
                    <line x1="260" y1="100" x2="320" y2="100" stroke="#ff6b35" stroke-width="2"/>
                    <line x1="320" y1="100" x2="320" y2="160" stroke="#ff6b35" stroke-width="2"/>
                    <text x="290" y="90" fill="#ff6b35" font-size="10" font-family="Heebo">×œ× (JNE)</text>
                    
                    <rect x="270" y="160" width="100" height="40" rx="5" fill="#1a2235" stroke="#ff6b35" stroke-width="2"/>
                    <text x="320" y="185" text-anchor="middle" fill="#ff6b35" font-size="11" font-family="Fira Code">b = 20</text>
                    
                    <!-- Merge -->
                    <line x1="80" y1="200" x2="80" y2="240" stroke="#a0a0a0" stroke-width="2"/>
                    <line x1="320" y1="200" x2="320" y2="240" stroke="#a0a0a0" stroke-width="2"/>
                    <line x1="80" y1="240" x2="320" y2="240" stroke="#a0a0a0" stroke-width="2"/>
                    <line x1="200" y1="240" x2="200" y2="260" stroke="#a0a0a0" stroke-width="2"/>
                    
                    <text x="200" y="275" text-anchor="middle" fill="#a0a0a0" font-size="10" font-family="Heebo">×”××©×š</text>
                </svg>
            </div>

            <h2>ğŸ”„ ×œ×•×œ××•×ª</h2>

            <h3>×œ×•×œ××ª while</h3>

            <div class="code-block">
                <div class="code-label">×§×•×“ C:</div>
                <pre>while (i < 10) {
    sum += i;
    i++;
}</pre>
            </div>

            <div class="code-block">
                <div class="code-label">Assembly:</div>
                <pre>loop_start:
    cmp dword [ebp-4], 10   ; Check: is i < 10?
    jge loop_end            ; If i >= 10, exit loop

    ; LOOP BODY
    mov eax, [ebp-4]        ; EAX = i
    add [ebp-8], eax        ; sum += i
    inc dword [ebp-4]       ; i++

    jmp loop_start          ; Jump back to start

loop_end:</pre>
            </div>

            <h3>×œ×•×œ××ª for ×¢× LOOP</h3>

            <div class="instruction">
                <div class="instruction-name">LOOP</div>
                <p>××•×¨×™×“ 1 ×-ECX ×•×§×•×¤×¥ ×× ECX â‰  0. ×©×™××•×©×™ ×œ×œ×•×œ××•×ª!</p>
            </div>

            <div class="code-block">
                <pre>    mov ecx, 10         ; Set 10 iterations

loop_start:
    ; loop body here

    loop loop_start     ; ECX--, if ECX != 0 jump back</pre>
            </div>

            <h2>ğŸ“ ×§×¨×™××•×ª ×œ×¤×•× ×§×¦×™×•×ª</h2>

            <div class="instruction">
                <div class="instruction-name">CALL</div>
                <p>×§×•×¨× ×œ×¤×•× ×§×¦×™×”: ×©×•××¨ ××ª ×›×ª×•×‘×ª ×”×—×–×¨×” ×¢×œ ×”-Stack ×•×§×•×¤×¥ ×œ×¤×•× ×§×¦×™×”.</p>
            </div>

            <div class="instruction">
                <div class="instruction-name">RET</div>
                <p>×—×•×–×¨ ××¤×•× ×§×¦×™×”: ×œ×•×§×— ×›×ª×•×‘×ª ××”-Stack ×•×§×•×¤×¥ ××œ×™×”.</p>
            </div>

            <div class="code-block">
                <div class="code-label">Calling a function:</div>
                <pre>CALL my_function    ; = PUSH EIP (save return addr), then JMP my_function</pre>
            </div>

            <div class="code-block">
                <div class="code-label">The function itself:</div>
                <pre>my_function:
    push ebp            ; Save old EBP
    mov ebp, esp        ; Set up stack frame
    ; ... code ...
    pop ebp             ; Restore old EBP
    RET                 ; = POP EIP (get return addr and jump to it)</pre>
            </div>

            <div class="diagram">
                <svg viewBox="0 0 500 200" xmlns="http://www.w3.org/2000/svg">
                    <!-- Main function -->
                    <rect x="20" y="20" width="180" height="160" rx="10" fill="#1a2235" stroke="#00b4d8" stroke-width="2"/>
                    <text x="110" y="45" text-anchor="middle" fill="#00b4d8" font-size="12" font-weight="bold" font-family="Heebo">main()</text>
                    
                    <text x="40" y="75" fill="#a0a0a0" font-size="10" font-family="Fira Code">...</text>
                    <text x="40" y="95" fill="#00ff88" font-size="10" font-family="Fira Code">CALL func</text>
                    <text x="40" y="115" fill="#ff6b35" font-size="10" font-family="Fira Code">â† ×—×–×¨×” ×œ×›××Ÿ</text>
                    <text x="40" y="135" fill="#a0a0a0" font-size="10" font-family="Fira Code">...</text>
                    
                    <!-- Arrow to func -->
                    <path d="M200 95 Q 260 60 300 70" stroke="#00ff88" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="250" y="55" fill="#00ff88" font-size="10" font-family="Heebo">CALL</text>
                    
                    <!-- func function -->
                    <rect x="300" y="20" width="180" height="160" rx="10" fill="#1a2235" stroke="#00ff88" stroke-width="2"/>
                    <text x="390" y="45" text-anchor="middle" fill="#00ff88" font-size="12" font-weight="bold" font-family="Heebo">func()</text>
                    
                    <text x="320" y="75" fill="#a0a0a0" font-size="10" font-family="Fira Code">push ebp</text>
                    <text x="320" y="95" fill="#a0a0a0" font-size="10" font-family="Fira Code">mov ebp, esp</text>
                    <text x="320" y="115" fill="#a0a0a0" font-size="10" font-family="Fira Code">; ×§×•×“...</text>
                    <text x="320" y="135" fill="#a0a0a0" font-size="10" font-family="Fira Code">pop ebp</text>
                    <text x="320" y="155" fill="#ff6b35" font-size="10" font-family="Fira Code">RET</text>
                    
                    <!-- Arrow back -->
                    <path d="M300 155 Q 260 180 200 115" stroke="#ff6b35" stroke-width="2" fill="none" marker-end="url(#arrowhead2)"/>
                    <text x="250" y="175" fill="#ff6b35" font-size="10" font-family="Heebo">RET</text>
                    
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#00ff88"/>
                        </marker>
                        <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#ff6b35"/>
                        </marker>
                    </defs>
                </svg>
            </div>

            <h2>ğŸ¯ ×–×™×”×•×™ ××‘× ×™× ×‘-RE</h2>

            <h3>ğŸ“Œ ×“×¤×•×¡×™× ×œ×–×™×”×•×™</h3>

            <div class="code-block">
                <div class="code-label">if-else pattern:</div>
                <pre>CMP ...             ; Compare
Jxx else_label      ; Conditional jump
; if code
JMP end_label       ; Skip else
else_label:
; else code
end_label:
; Pattern: CMP -> conditional jump -> JMP (to skip else)</pre>
            </div>

            <div class="code-block">
                <div class="code-label">while loop pattern:</div>
                <pre>loop_start:
CMP ...             ; Check condition
Jxx loop_end        ; Exit if condition false
; loop body
JMP loop_start      ; Jump back to start
loop_end:
; Pattern: CMP at start -> exit jump -> JMP back to start</pre>
            </div>

            <div class="code-block">
                <div class="code-label">for loop pattern:</div>
                <pre>; init (i=0)
loop_start:
CMP ECX, limit      ; Check condition
Jxx loop_end        ; Exit if done
; loop body
INC ECX             ; i++ (or DEC)
JMP loop_start      ; Jump back
loop_end:
; Pattern: init -> CMP -> body -> INC/DEC -> JMP back</pre>
            </div>

            <h2>ğŸ“‹ ×¡×™×›×•× ×”×¤×¨×§</h2>
            
            <ul>
                <li><strong>JMP</strong> - ×§×¤×™×¦×” ×œ×œ× ×ª× ××™</li>
                <li><strong>CMP</strong> - ×”×©×•×•××” (××¢×“×›×Ÿ ×“×’×œ×™×)</li>
                <li><strong>TEST</strong> - ×‘×“×™×§×” ×× 0</li>
                <li><strong>Jxx</strong> - ×§×¤×™×¦×•×ª ××•×ª× ×•×ª (JE, JNE, JG, JL...)</li>
                <li><strong>LOOP</strong> - ×œ×•×œ××” ×¢× ECX</li>
                <li><strong>CALL</strong> - ×§×¨×™××” ×œ×¤×•× ×§×¦×™×”</li>
                <li><strong>RET</strong> - ×—×–×¨×” ××¤×•× ×§×¦×™×”</li>
                <li>Signed: JG, JGE, JL, JLE | Unsigned: JA, JAE, JB, JBE</li>
            </ul>

            <div class="nav-buttons">
                <a href="chapter5.html" class="nav-btn">â†’ ×¤×¨×§ 5: Assembly ×™×¡×•×“×•×ª</a>
                <a href="chapter7.html" class="nav-btn">×¤×¨×§ 7: ×¤×•×¨××˜ PE â†</a>
            </div>
        </div>
    </div>
</body>
</html>

