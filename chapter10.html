<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 10: Debugging</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700;900&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #131a2b;
            --bg-card: #1a2235;
            --accent-primary: #00ff88;
            --accent-secondary: #00b4d8;
            --accent-warning: #ff6b35;
            --text-primary: #e8e8e8;
            --text-secondary: #a0a0a0;
            --border-color: #2a3548;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.9; }
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        nav { background: var(--bg-secondary); padding: 1rem 2rem; border-bottom: 1px solid var(--border-color); position: sticky; top: 0; z-index: 100; }
        nav a { color: var(--accent-primary); text-decoration: none; }
        .chapter-header { background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-secondary) 100%); padding: 4rem 2rem; text-align: center; border-bottom: 1px solid var(--border-color); }
        .chapter-number { display: inline-block; background: linear-gradient(135deg, #00ff88 0%, #00b4d8 100%); color: var(--bg-primary); padding: 0.5rem 1.5rem; border-radius: 30px; font-weight: 700; margin-bottom: 1rem; }
        h1 { font-size: 2.5rem; margin-bottom: 1rem; background: linear-gradient(135deg, #00ff88 0%, #00b4d8 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .subtitle { color: var(--text-secondary); font-size: 1.1rem; }
        .content { padding: 3rem 0; }
        h2 { font-size: 1.8rem; color: var(--accent-primary); margin: 3rem 0 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid var(--border-color); }
        h3 { font-size: 1.3rem; color: var(--accent-secondary); margin: 2rem 0 1rem; }
        p { margin-bottom: 1.5rem; }
        .definition { background: var(--bg-card); border-left: 4px solid var(--accent-primary); padding: 1.5rem; border-radius: 0 10px 10px 0; margin: 1.5rem 0; }
        .definition-title { color: var(--accent-primary); font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem; }
        .info-box { background: rgba(0, 180, 216, 0.1); border: 1px solid var(--accent-secondary); border-radius: 10px; padding: 1.5rem; margin: 1.5rem 0; }
        .info-box-title { color: var(--accent-secondary); font-weight: 700; margin-bottom: 0.5rem; }
        .warning-box { background: rgba(255, 107, 53, 0.1); border: 1px solid var(--accent-warning); border-radius: 10px; padding: 1.5rem; margin: 1.5rem 0; }
        .warning-box-title { color: var(--accent-warning); font-weight: 700; margin-bottom: 0.5rem; }
        ul, ol { margin: 1rem 0 1.5rem 1.5rem; }
        li { margin-bottom: 0.8rem; }
        code { font-family: 'Fira Code', monospace; background: var(--bg-card); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--accent-primary); font-size: 0.9rem; }
        pre { font-family: 'Fira Code', monospace; background: var(--bg-card); padding: 1.5rem; border-radius: 10px; overflow-x: auto; margin: 1.5rem 0; border: 1px solid var(--border-color); line-height: 1.6; }
        table { width: 100%; border-collapse: collapse; margin: 1.5rem 0; background: var(--bg-card); border-radius: 10px; overflow: hidden; }
        th, td { padding: 1rem; text-align: left; border-bottom: 1px solid var(--border-color); }
        th { background: var(--bg-secondary); color: var(--accent-primary); font-weight: 600; }
        .nav-buttons { display: flex; justify-content: space-between; margin-top: 4rem; padding-top: 2rem; border-top: 1px solid var(--border-color); }
        .nav-btn { background: var(--bg-card); color: var(--text-primary); padding: 1rem 2rem; border-radius: 10px; text-decoration: none; border: 1px solid var(--border-color); transition: all 0.3s; }
        .nav-btn:hover { border-color: var(--accent-primary); transform: translateY(-3px); }
        .tool-card { background: var(--bg-card); border-radius: 15px; padding: 2rem; margin: 2rem 0; border: 1px solid var(--border-color); }
        .tool-name { color: var(--accent-primary); font-size: 1.5rem; font-weight: 700; margin-bottom: 0.5rem; }
        .tool-type { color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 1rem; }
        .shortcut-table td:first-child { font-family: 'Fira Code', monospace; color: var(--accent-secondary); }
    </style>
</head>
<body>
    <nav>
        <a href="index.html">‚Üê Back to Main Menu</a>
    </nav>

    <header class="chapter-header">
        <div class="chapter-number">Chapter 10</div>
        <h1>Debugging</h1>
        <p class="subtitle">Dynamic analysis with x64dbg and WinDbg</p>
    </header>

    <div class="container">
        <div class="content">
            
            <h2>üî¨ What is Dynamic Analysis?</h2>

            <div class="definition">
                <div class="definition-title">üìñ Definition: Dynamic Analysis</div>
                <p>Analyzing software <strong>while running it</strong>. Allows seeing values in real-time, tracking behavior, and modifying execution.</p>
            </div>

            <div class="definition">
                <div class="definition-title">üìñ Definition: Debugger</div>
                <p>Software that allows running another program step by step, stopping at specific points, and examining/modifying memory and registers.</p>
            </div>

            <p>Advantages:</p>
            <ul>
                <li>See real values at runtime</li>
                <li>Can bypass checks and conditions</li>
                <li>Discover dynamically unpacked code</li>
                <li>Easy to follow complex logic</li>
            </ul>

            <div class="warning-box">
                <div class="warning-box-title">‚ö†Ô∏è Warning</div>
                <p>
                    When analyzing malware, <strong>always</strong> use an isolated VM!<br>
                    The code actually runs and can cause damage.
                </p>
            </div>

            <h2>üõ†Ô∏è Debugging Tools</h2>

            <div class="tool-card">
                <div class="tool-name">üîß x64dbg</div>
                <div class="tool-type">User-mode debugger - Free and Popular</div>
                <p>
                    The most popular debugger for Windows RE. Free, open-source, and with a convenient interface.
                </p>
                <ul>
                    <li>Supports 32-bit (x32dbg) and 64-bit (x64dbg)</li>
                    <li>Convenient graphical interface</li>
                    <li>Plugin support</li>
                    <li>Recommended for beginners!</li>
                </ul>
            </div>

            <div class="tool-card">
                <div class="tool-name">üîß WinDbg</div>
                <div class="tool-type">Microsoft's debugger - for kernel and user mode</div>
                <p>
                    Microsoft's official debugger. Very powerful but with a steep learning curve.
                </p>
                <ul>
                    <li>Can debug kernel drivers</li>
                    <li>Access to Windows symbols</li>
                    <li>CLI interface (newer version has GUI)</li>
                </ul>
            </div>

            <div class="tool-card">
                <div class="tool-name">üîß OllyDbg</div>
                <div class="tool-type">Classic - 32-bit only</div>
                <p>
                    Was the most popular tool before x64dbg. Still good but not updated.
                </p>
            </div>

            <h2>üöÄ Getting Started with x64dbg</h2>

            <h3>User Interface</h3>

            <table>
                <tr>
                    <th>Window</th>
                    <th>Content</th>
                </tr>
                <tr>
                    <td><strong>CPU</strong></td>
                    <td>Assembly code - the main view</td>
                </tr>
                <tr>
                    <td><strong>Registers</strong></td>
                    <td>Register values in real-time</td>
                </tr>
                <tr>
                    <td><strong>Stack</strong></td>
                    <td>Stack contents</td>
                </tr>
                <tr>
                    <td><strong>Dump</strong></td>
                    <td>Memory view (hex)</td>
                </tr>
                <tr>
                    <td><strong>Memory Map</strong></td>
                    <td>Map of memory regions</td>
                </tr>
                <tr>
                    <td><strong>Breakpoints</strong></td>
                    <td>List of breakpoints</td>
                </tr>
            </table>

            <h3>Keyboard Shortcuts</h3>

            <table class="shortcut-table">
                <tr>
                    <th>Shortcut</th>
                    <th>Action</th>
                </tr>
                <tr>
                    <td>F2</td>
                    <td>Toggle Breakpoint - enable/disable BP</td>
                </tr>
                <tr>
                    <td>F7</td>
                    <td>Step Into - step inside (enters functions)</td>
                </tr>
                <tr>
                    <td>F8</td>
                    <td>Step Over - step over (doesn't enter)</td>
                </tr>
                <tr>
                    <td>F9</td>
                    <td>Run - run until next BP</td>
                </tr>
                <tr>
                    <td>Ctrl+F9</td>
                    <td>Run until Return - run until function end</td>
                </tr>
                <tr>
                    <td>Ctrl+G</td>
                    <td>Go to Address - jump to address</td>
                </tr>
                <tr>
                    <td>G</td>
                    <td>Go to Expression</td>
                </tr>
                <tr>
                    <td>;</td>
                    <td>Add comment</td>
                </tr>
                <tr>
                    <td>:</td>
                    <td>Rename (Label)</td>
                </tr>
            </table>

            <h2>üî¥ Breakpoints</h2>

            <div class="definition">
                <div class="definition-title">üìñ Definition: Breakpoint (BP)</div>
                <p>A point in the code where the debugger will stop execution. Allows examining state at a specific point.</p>
            </div>

            <h3>Types of Breakpoints</h3>

            <table>
                <tr>
                    <th>Type</th>
                    <th>Use</th>
                    <th>How</th>
                </tr>
                <tr>
                    <td><strong>Software BP</strong></td>
                    <td>Stop at specific instruction</td>
                    <td>F2 on the line</td>
                </tr>
                <tr>
                    <td><strong>Hardware BP</strong></td>
                    <td>Stop on memory access</td>
                    <td>Right-click ‚Üí Breakpoint ‚Üí Hardware</td>
                </tr>
                <tr>
                    <td><strong>Memory BP</strong></td>
                    <td>Stop when reading/writing to region</td>
                    <td>Right-click on dump ‚Üí Breakpoint</td>
                </tr>
                <tr>
                    <td><strong>Conditional BP</strong></td>
                    <td>Stop only if condition is met</td>
                    <td>Right-click ‚Üí Edit condition</td>
                </tr>
            </table>

            <div class="info-box">
                <div class="info-box-title">üí° Tip: BP on API</div>
                <p>
                    You can set BP on Windows API functions!<br>
                    <code>bp kernel32.CreateFileA</code><br>
                    <code>bp ws2_32.connect</code><br>
                    This helps catch interesting operations.
                </p>
            </div>

            <h2>üë£ Stepping</h2>

            <div class="definition">
                <div class="definition-title">üìñ Definition: Step Into (F7)</div>
                <p>Executes one instruction. If it's a CALL, enters the function.</p>
            </div>

            <div class="definition">
                <div class="definition-title">üìñ Definition: Step Over (F8)</div>
                <p>Executes one instruction. If it's a CALL, runs the entire function and stops after it.</p>
            </div>

            <pre>
00401000: mov eax, 5
00401005: call func      ; F7 enters func, F8 runs it and continues
0040100A: add eax, 1     ; We stop here after F8
            </pre>

            <h2>üîß Runtime Modification</h2>

            <h3>Modifying Registers</h3>
            <p>Double-click on a register value in the Registers window and change it.</p>

            <h3>Modifying Memory</h3>
            <p>In the Dump window, double-click on a byte and change it.</p>

            <h3>Modifying Instructions (Patching)</h3>

            <div class="definition">
                <div class="definition-title">üìñ Definition: Patching</div>
                <p>Changing bytes in the code to modify behavior. For example, changing JE to JNE.</p>
            </div>

            <pre>
; Original code - checks password
cmp eax, 1
je  valid_password    ; jumps if correct

; After patch - always jumps
cmp eax, 1
jmp valid_password    ; JE (0x74) ‚Üí JMP (0xEB)
            </pre>

            <div class="info-box">
                <div class="info-box-title">üí° In x64dbg</div>
                <p>
                    To modify instruction: Space on the line, or right-click ‚Üí Assemble<br>
                    To save changes to file: Right-click ‚Üí Patches ‚Üí Patch File
                </p>
            </div>

            <h2>üîç RE Techniques</h2>

            <h3>Finding the Correct Password</h3>

            <pre>
; Typical password check code
call get_input        ; get input from user
push eax              ; the entered password
push correct_password ; the correct password
call strcmp           ; comparison
test eax, eax
jnz  wrong_password   ; if not equal - failure
jmp  success
            </pre>

            <p>Options:</p>
            <ol>
                <li><strong>BP on strcmp</strong> - see what's being compared</li>
                <li><strong>Change ZF</strong> - after TEST, change the Zero Flag</li>
                <li><strong>Patch</strong> - change JNZ to JZ (or NOP)</li>
            </ol>

            <h3>Tracing</h3>

            <div class="definition">
                <div class="definition-title">üìñ Definition: Trace</div>
                <p>Running the code and recording every instruction executed. Useful for understanding flow.</p>
            </div>

            <p>In x64dbg: Debug ‚Üí Trace over / Trace into</p>

            <h2>üìã Chapter Summary</h2>
            
            <ul>
                <li><strong>Dynamic Analysis</strong> - analysis while running</li>
                <li><strong>x64dbg</strong> - recommended debugger for beginners</li>
                <li><strong>Breakpoints</strong> - stopping points (F2)</li>
                <li><strong>F7</strong> = Step Into, <strong>F8</strong> = Step Over</li>
                <li><strong>F9</strong> = Run until next breakpoint</li>
                <li>Can modify registers, memory, and instructions at runtime</li>
                <li><strong>Patching</strong> - modifying code to change behavior</li>
            </ul>

            <div class="info-box">
                <div class="info-box-title">üéâ You've completed the theoretical section!</div>
                <p>
                    Now it's time for practical exercises.<br>
                    Go to Labs to apply what you've learned!
                </p>
            </div>

            <div class="nav-buttons">
                <a href="chapter9.html" class="nav-btn">‚Üê Chapter 9: Analysis Tools</a>
                <a href="lab1.html" class="nav-btn">üîß Lab 1: Getting to Know the Tools ‚Üí</a>
            </div>
        </div>
    </div>
</body>
</html>
